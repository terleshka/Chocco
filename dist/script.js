"use strict";

//полноэкранное меню
var menuOpen = document.getElementById('menuOpen');
var menuModal = document.getElementById('menuModal');
var menuClose = document.getElementById('menuClose');

menuOpen.onclick = function () {
  menuModal.style.display = "flex";
  document.body.style.overflow = "hidden";
};

menuClose.onclick = function () {
  menuModal.style.display = "none";
  document.body.style.overflow = "auto";
}; //аккордеон для секции команда


var acc = document.getElementsByClassName("team__name");

for (var i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function () {
    this.classList.toggle("team__name--active");
  });
} //аккордеон для секции меню


var accordion = document.querySelector('.accordion');
var currentActiveItem;
accordion.classList.add('accordion');
accordion.addEventListener('click', function (e) {
  if (e.target.classList.contains('accordion__title') || e.target.classList.contains('accordion__link')) {
    if (currentActiveItem) {
      currentActiveItem.classList.remove('accordion__item--active');

      if (currentActiveItem == e.target.parentNode.parentNode || currentActiveItem == e.target.parentNode) {
        currentActiveItem = 0;
        return;
      }
    }

    if (e.target.classList.contains('accordion__title')) {
      currentActiveItem = e.target.parentNode.parentNode;
    } else {
      currentActiveItem = e.target.parentNode;
    }

    currentActiveItem.classList.add('accordion__item--active');
  }
}); //слайдер с батончиками

var left = $('#left');
var right = $('#right');
var items = $('#items');
var slider = $('.slider');
var slideInterval = setInterval(rightClickTimer, 8000);
var firstStep = 0;
var step = slider.width();
var lastStep = items.width();
var currentStep = 0;
items.css('right', currentStep);

function rightClickTimer() {
  if (currentStep < lastStep - step) {
    currentStep += step;
    items.css('right', currentStep + "px");
    return;
  }

  if (currentStep == lastStep - step) {
    currentStep = 0;
    items.css('right', currentStep + "px");
  }
}

right.on("click", function (e) {
  e.preventDefault();
  rightClickTimer();
});
left.on("click", function (e) {
  e.preventDefault();

  if (currentStep > firstStep) {
    currentStep -= step;
    items.css('right', currentStep + "px");
    return;
  }

  if (currentStep == firstStep) {
    currentStep = lastStep - step;
    items.css('right', currentStep + "px");
  }
}); //слайдер с отзывами

var feedbackSliderOne = $('.slider_one');
var feedbackSliderTwo = $('.slider_two');
var feedbackSliderThree = $('.slider_three');
var avatarOne = $('.avatar_one');
var avatarTwo = $('.avatar_two');
var avatarThree = $('.avatar_three');
var numClick = 1;
var slideInterval_1 = setInterval(autoClick, 6000);
autoClick();

function deleteClassActive() {
  $('.avatar__img').removeClass('avatar__img_active');
  $('.feedback__slider').removeClass('feedback__slider--active');
}

function autoClick() {
  deleteClassActive();

  switch (numClick) {
    case 1:
      feedbackSliderOne.addClass('feedback__slider--active');
      avatarOne.addClass('avatar__img_active');
      numClick++;
      break;

    case 2:
      feedbackSliderTwo.addClass('feedback__slider--active');
      avatarTwo.addClass('avatar__img_active');
      numClick++;
      break;

    case 3:
      feedbackSliderThree.addClass('feedback__slider--active');
      avatarThree.addClass('avatar__img_active');
      numClick = 1;
      break;
  }
}

avatarOne.on('click', function (e) {
  numClick = 1;
  autoClick();
});
avatarTwo.on('click', function (e) {
  numClick = 2;
  autoClick();
});
avatarThree.on('click', function (e) {
  numClick = 3;
  autoClick();
}); // Отправка формы

var form = document.querySelector('.form');
var send = document.querySelector('.form__submit');
var modal = document.querySelector('.modal');
var modalText = document.querySelector('.modal__title');
var modalExit = document.querySelector('.modal__btn');
var modalWindow = document.querySelector('.modal__window');
send.addEventListener('click', function (e) {
  e.preventDefault();
  var formData = new FormData();

  if (validateForm(form)) {
    formData.append("name", form.elements.name.value);
    formData.append("phone", form.elements.phone.value);
    formData.append("comment", form.elements.comment.value);
    formData.append("to", "vika-terleckaya@mail.ru");
    var xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    xhr.open('POST', 'https://webdev-api.loftschool.com/sendmail/');
    xhr.setRequestHeader("X-Requested-Width", "XMLHttpRequest");
    xhr.send(formData);
    xhr.addEventListener('load', function () {
      if (xhr.response.status) {
        console.log(xhr.response);
        modal.style.display = "block";
        modalWindow.style.opacity = "1";
        document.body.style.overflow = "hidden";
        modalText.textContent = "Сообщение отправлено";
      } else {
        modal.style.display = "block";
        modalWindow.style.opacity = "1";
        document.body.style.overflow = "hidden";
        modalText.textContent = "Ошибка отправки";
      }
    });
  }
});
modalExit.addEventListener('click', function (e) {
  e.preventDefault();
  modal.style.display = 'none';
  document.body.style.overflow = "auto ";
});

window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
    document.body.style.overflow = "auto";
  }
};

function validateForm(form) {
  var valid = true;

  if (!validateField(form.elements.name)) {
    valid = false;
  }

  if (!validateField(form.elements.phone)) {
    valid = false;
  }

  if (!validateField(form.elements.comment)) {
    valid = false;
  }

  return valid;
}

function validateField(field) {
  field.nextElementSibling.textContent = field.validationMessage;
  return field.checkValidity();
} //подключение яндекс-карт


ymaps.ready(function () {
  var myMap = new ymaps.Map('map', {
    center: [59.941861, 30.321988],
    zoom: 13
  });
  myMap.behaviors.disable('scrollZoom');
  MyIconContentLayout = ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'), myPlacemark = new ymaps.Placemark([59.943477, 30.324360], {
    hintContent: 'CHOCCO',
    balloonContent: 'график: пн-пт, выходные: сб,вс <br> часы работы: с 10-00 до 18-00'
  }, {
    iconLayout: 'default#imageWithContent',
    iconImageHref: './images/map/marker.png',
    iconImageSize: [46, 57],
    iconImageOffset: [-24, -24],
    iconContentLayout: MyIconContentLayout
  });
  myPlacemark2 = new ymaps.Placemark([59.932323, 30.303289], {
    hintContent: 'CHOCCO',
    balloonContent: 'график: пн-пт, выходные: сб,вс <br> часы работы: с 10-00 до 18-00'
  }, {
    iconLayout: 'default#imageWithContent',
    iconImageHref: './images/map/marker.png',
    iconImageSize: [46, 57],
    iconImageOffset: [-24, -24],
    iconContentLayout: MyIconContentLayout
  });
  myMap.geoObjects.add(myPlacemark).add(myPlacemark2);
}); // скролл для секций

var sections = $('.section');
var display = $('.maincontent');
var inscroll = false;
var md = new MobileDetect(window.navigator.userAgent);
var isMobile = md.mobile();

var switchActiveClassSideMenu = function switchActiveClassSideMenu(navLinkIndex) {
  $('.nav__link').eq(navLinkIndex).addClass('nav__link--active').siblings().removeClass('nav__link--active');
};

var performTransition = function performTransition(sectionEq) {
  if (inscroll) return;
  var transitionDuration = 0;
  var endOfInertion = 300;
  inscroll = true;
  var position = "".concat(sectionEq * -100, "%");
  sections.eq(sectionEq).addClass('active').siblings().removeClass('active');
  display.css({
    transform: "translateY(".concat(position, ")")
  });
  setTimeout(function () {
    switchActiveClassSideMenu(sections);
    inscroll = false;
  }, transitionDuration + endOfInertion);
};

var scrollToSection = function scrollToSection(direction) {
  var activeSection = sections.filter('.active');
  var nextSection = activeSection.next();
  var prevSection = activeSection.prev();

  if (direction == 'next' && nextSection.length) {
    performTransition(nextSection.index());
  }

  if (direction == 'prev' && prevSection.length) {
    performTransition(prevSection.index());
  }
};

$('.wrapper').on('wheel', function (e) {
  var deltaY = e.originalEvent.deltaY;

  if (deltaY > 0) {
    scrollToSection('next');
  }

  if (deltaY < 0) {
    scrollToSection('prev');
  }
});
$('.wrapper').on('touchmove', function (e) {
  e.preventDefoult();
});
$(document).on('keydown', function (e) {
  switch (e.keyCode) {
    case 40:
      scrollToSection('next');
      break;

    case 38:
      scrollToSection('prev');
      break;
  }
});
$('[data-scroll-to]').on('click', function (e) {
  e.preventDefault();
  var target = $(e.currentTarget).attr('data-scroll-to');
  performTransition(target);
  console.log(target);
});

if (isMobile) {
  $(window).swipe({
    swipe: function swipe(event, direction, distance, duration, fingerCount, fingerData) {
      var nextOrPrev = direction == 'up' ? 'next' : 'prev';
      scrollToSection(nextOrPrev);
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJtZW51T3BlbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtZW51TW9kYWwiLCJtZW51Q2xvc2UiLCJvbmNsaWNrIiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsIm92ZXJmbG93IiwiYWNjIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWNjb3JkaW9uIiwicXVlcnlTZWxlY3RvciIsImN1cnJlbnRBY3RpdmVJdGVtIiwiYWRkIiwiZSIsInRhcmdldCIsImNvbnRhaW5zIiwicmVtb3ZlIiwicGFyZW50Tm9kZSIsImxlZnQiLCIkIiwicmlnaHQiLCJpdGVtcyIsInNsaWRlciIsInNsaWRlSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInJpZ2h0Q2xpY2tUaW1lciIsImZpcnN0U3RlcCIsInN0ZXAiLCJ3aWR0aCIsImxhc3RTdGVwIiwiY3VycmVudFN0ZXAiLCJjc3MiLCJvbiIsInByZXZlbnREZWZhdWx0IiwiZmVlZGJhY2tTbGlkZXJPbmUiLCJmZWVkYmFja1NsaWRlclR3byIsImZlZWRiYWNrU2xpZGVyVGhyZWUiLCJhdmF0YXJPbmUiLCJhdmF0YXJUd28iLCJhdmF0YXJUaHJlZSIsIm51bUNsaWNrIiwic2xpZGVJbnRlcnZhbF8xIiwiYXV0b0NsaWNrIiwiZGVsZXRlQ2xhc3NBY3RpdmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZm9ybSIsInNlbmQiLCJtb2RhbCIsIm1vZGFsVGV4dCIsIm1vZGFsRXhpdCIsIm1vZGFsV2luZG93IiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInZhbGlkYXRlRm9ybSIsImFwcGVuZCIsImVsZW1lbnRzIiwibmFtZSIsInZhbHVlIiwicGhvbmUiLCJjb21tZW50IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVR5cGUiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInJlc3BvbnNlIiwic3RhdHVzIiwiY29uc29sZSIsImxvZyIsIm9wYWNpdHkiLCJ0ZXh0Q29udGVudCIsIndpbmRvdyIsImV2ZW50IiwidmFsaWQiLCJ2YWxpZGF0ZUZpZWxkIiwiZmllbGQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrVmFsaWRpdHkiLCJ5bWFwcyIsInJlYWR5IiwibXlNYXAiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiYmVoYXZpb3JzIiwiZGlzYWJsZSIsIk15SWNvbkNvbnRlbnRMYXlvdXQiLCJ0ZW1wbGF0ZUxheW91dEZhY3RvcnkiLCJjcmVhdGVDbGFzcyIsIm15UGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiaGludENvbnRlbnQiLCJiYWxsb29uQ29udGVudCIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsImljb25Db250ZW50TGF5b3V0IiwibXlQbGFjZW1hcmsyIiwiZ2VvT2JqZWN0cyIsInNlY3Rpb25zIiwiaW5zY3JvbGwiLCJtZCIsIk1vYmlsZURldGVjdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzTW9iaWxlIiwibW9iaWxlIiwic3dpdGNoQWN0aXZlQ2xhc3NTaWRlTWVudSIsIm5hdkxpbmtJbmRleCIsImVxIiwic2libGluZ3MiLCJwZXJmb3JtVHJhbnNpdGlvbiIsInNlY3Rpb25FcSIsInRyYW5zaXRpb25EdXJhdGlvbiIsImVuZE9mSW5lcnRpb24iLCJwb3NpdGlvbiIsInRyYW5zZm9ybSIsInNldFRpbWVvdXQiLCJzY3JvbGxUb1NlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmVTZWN0aW9uIiwiZmlsdGVyIiwibmV4dFNlY3Rpb24iLCJuZXh0IiwicHJldlNlY3Rpb24iLCJwcmV2IiwiaW5kZXgiLCJkZWx0YVkiLCJvcmlnaW5hbEV2ZW50IiwicHJldmVudERlZm91bHQiLCJrZXlDb2RlIiwiY3VycmVudFRhcmdldCIsImF0dHIiLCJzd2lw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QUE4RixRQUFBLEVBQUE7QUFDQXpGLEVBQUFBLENBQUEsQ0FBQXFELE1BQUEsQ0FBQSxDQUFBZ0UsS0FBQSxDQUFBO0FBQ0FBLElBQUFBLEtBQUEsRUFBQSxlQUFBL0QsS0FBQSxFQUFBaUQsU0FBQSxFQUFBZSxRQUFBLEVBQUFDLFFBQUEsRUFBQUMsV0FBQSxFQUFBQyxVQUFBLEVBQUE7QUFDQSxVQUFBQyxVQUFBLEdBQUFuQixTQUFBLElBQUEsSUFBQSxHQUFBLE1BQUEsR0FBQSxNQUFBO0FBRUFELE1BQUFBLGVBQUEsQ0FBQW9CLFVBQUEsQ0FBQTtBQUNBO0FBTEEsR0FBQTtBQU9BIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0L/QvtC70L3QvtGN0LrRgNCw0L3QvdC+0LUg0LzQtdC90Y5cclxuXHJcbmNvbnN0IG1lbnVPcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVPcGVuJyk7XHJcbmNvbnN0IG1lbnVNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51TW9kYWwnKTtcclxuY29uc3QgbWVudUNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnVDbG9zZScpO1xyXG5tZW51T3Blbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIG1lbnVNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbn07XHJcbm1lbnVDbG9zZS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIG1lbnVNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG59O1xyXG5cclxuLy/QsNC60LrQvtGA0LTQtdC+0L0g0LTQu9GPINGB0LXQutGG0LjQuCDQutC+0LzQsNC90LTQsFxyXG5cclxudmFyIGFjYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0ZWFtX19uYW1lXCIpO1xyXG5cclxuZm9yICh2YXIgaSA9IDA7IGkgPCBhY2MubGVuZ3RoOyBpKyspIHtcclxuICBhY2NbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcInRlYW1fX25hbWUtLWFjdGl2ZVwiKTtcclxuICB9KTtcclxufVxyXG5cclxuLy/QsNC60LrQvtGA0LTQtdC+0L0g0LTQu9GPINGB0LXQutGG0LjQuCDQvNC10L3RjlxyXG5jb25zdCBhY2NvcmRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJyk7XHJcbnZhciBjdXJyZW50QWN0aXZlSXRlbTtcclxuXHJcbmFjY29yZGlvbi5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpb24nKTtcclxuYWNjb3JkaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX3RpdGxlJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX2xpbmsnKSkge1xyXG4gICAgaWYgKGN1cnJlbnRBY3RpdmVJdGVtKSB7XHJcbiAgICAgIGN1cnJlbnRBY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGlvbl9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgIGlmIChjdXJyZW50QWN0aXZlSXRlbSA9PSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUgfHwgY3VycmVudEFjdGl2ZUl0ZW0gPT0gZS50YXJnZXQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgIGN1cnJlbnRBY3RpdmVJdGVtID0gMDtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX3RpdGxlJykpIHtcclxuICAgICAgY3VycmVudEFjdGl2ZUl0ZW0gPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdXJyZW50QWN0aXZlSXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICB9XHJcbiAgICBjdXJyZW50QWN0aXZlSXRlbS5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpb25fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vL9GB0LvQsNC50LTQtdGAINGBINCx0LDRgtC+0L3Rh9C40LrQsNC80LhcclxuXHJcbmNvbnN0IGxlZnQgPSAkKCcjbGVmdCcpO1xyXG5jb25zdCByaWdodCA9ICQoJyNyaWdodCcpO1xyXG5jb25zdCBpdGVtcyA9ICQoJyNpdGVtcycpO1xyXG5jb25zdCBzbGlkZXIgPSAkKCcuc2xpZGVyJyk7XHJcbnZhciBzbGlkZUludGVydmFsID0gc2V0SW50ZXJ2YWwocmlnaHRDbGlja1RpbWVyLCA4MDAwKTtcclxuXHJcbmNvbnN0IGZpcnN0U3RlcCA9IDA7XHJcbmNvbnN0IHN0ZXAgPSBzbGlkZXIud2lkdGgoKTtcclxuY29uc3QgbGFzdFN0ZXAgPSBpdGVtcy53aWR0aCgpO1xyXG5sZXQgY3VycmVudFN0ZXAgPSAwO1xyXG5pdGVtcy5jc3MoJ3JpZ2h0JywgY3VycmVudFN0ZXApO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHJpZ2h0Q2xpY2tUaW1lcigpIHtcclxuICBpZiAoY3VycmVudFN0ZXAgPCBsYXN0U3RlcCAtIHN0ZXApIHtcclxuICAgIGN1cnJlbnRTdGVwICs9IHN0ZXA7XHJcbiAgICBpdGVtcy5jc3MoJ3JpZ2h0JywgY3VycmVudFN0ZXAgKyBcInB4XCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoY3VycmVudFN0ZXAgPT0gbGFzdFN0ZXAgLSBzdGVwKSB7XHJcbiAgICBjdXJyZW50U3RlcCA9IDA7XHJcbiAgICBpdGVtcy5jc3MoJ3JpZ2h0JywgY3VycmVudFN0ZXAgKyBcInB4XCIpO1xyXG4gIH1cclxufVxyXG5cclxucmlnaHQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICByaWdodENsaWNrVGltZXIoKTtcclxufSk7XHJcblxyXG5sZWZ0Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaWYgKGN1cnJlbnRTdGVwID4gZmlyc3RTdGVwKSB7XHJcbiAgICBjdXJyZW50U3RlcCAtPSBzdGVwO1xyXG4gICAgaXRlbXMuY3NzKCdyaWdodCcsIGN1cnJlbnRTdGVwICsgXCJweFwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKGN1cnJlbnRTdGVwID09IGZpcnN0U3RlcCkge1xyXG4gICAgY3VycmVudFN0ZXAgPSBsYXN0U3RlcCAtIHN0ZXA7XHJcbiAgICBpdGVtcy5jc3MoJ3JpZ2h0JywgY3VycmVudFN0ZXAgKyBcInB4XCIpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vL9GB0LvQsNC50LTQtdGAINGBINC+0YLQt9GL0LLQsNC80LhcclxuXHJcbmNvbnN0IGZlZWRiYWNrU2xpZGVyT25lID0gJCgnLnNsaWRlcl9vbmUnKTtcclxuY29uc3QgZmVlZGJhY2tTbGlkZXJUd28gPSAkKCcuc2xpZGVyX3R3bycpO1xyXG5jb25zdCBmZWVkYmFja1NsaWRlclRocmVlID0gJCgnLnNsaWRlcl90aHJlZScpO1xyXG5cclxuY29uc3QgYXZhdGFyT25lID0gJCgnLmF2YXRhcl9vbmUnKTtcclxuY29uc3QgYXZhdGFyVHdvID0gJCgnLmF2YXRhcl90d28nKTtcclxuY29uc3QgYXZhdGFyVGhyZWUgPSAkKCcuYXZhdGFyX3RocmVlJyk7XHJcbmxldCBudW1DbGljayA9IDE7XHJcbnZhciBzbGlkZUludGVydmFsXzEgPSBzZXRJbnRlcnZhbChhdXRvQ2xpY2ssIDYwMDApO1xyXG5cclxuYXV0b0NsaWNrKCk7XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDbGFzc0FjdGl2ZSgpIHtcclxuXHJcbiAgJCgnLmF2YXRhcl9faW1nJykucmVtb3ZlQ2xhc3MoJ2F2YXRhcl9faW1nX2FjdGl2ZScpO1xyXG4gICQoJy5mZWVkYmFja19fc2xpZGVyJykucmVtb3ZlQ2xhc3MoJ2ZlZWRiYWNrX19zbGlkZXItLWFjdGl2ZScpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gYXV0b0NsaWNrKCkge1xyXG4gIGRlbGV0ZUNsYXNzQWN0aXZlKCk7XHJcbiAgc3dpdGNoIChudW1DbGljaykge1xyXG4gICAgY2FzZSAxOiBmZWVkYmFja1NsaWRlck9uZS5hZGRDbGFzcygnZmVlZGJhY2tfX3NsaWRlci0tYWN0aXZlJyk7XHJcbiAgICAgIGF2YXRhck9uZS5hZGRDbGFzcygnYXZhdGFyX19pbWdfYWN0aXZlJyk7XHJcbiAgICAgIG51bUNsaWNrKys7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAyOiBmZWVkYmFja1NsaWRlclR3by5hZGRDbGFzcygnZmVlZGJhY2tfX3NsaWRlci0tYWN0aXZlJyk7XHJcbiAgICAgIGF2YXRhclR3by5hZGRDbGFzcygnYXZhdGFyX19pbWdfYWN0aXZlJyk7XHJcbiAgICAgIG51bUNsaWNrKys7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAzOlxyXG4gICAgICBmZWVkYmFja1NsaWRlclRocmVlLmFkZENsYXNzKCdmZWVkYmFja19fc2xpZGVyLS1hY3RpdmUnKTtcclxuICAgICAgYXZhdGFyVGhyZWUuYWRkQ2xhc3MoJ2F2YXRhcl9faW1nX2FjdGl2ZScpO1xyXG4gICAgICBudW1DbGljayA9IDE7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmF2YXRhck9uZS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIG51bUNsaWNrID0gMTtcclxuICBhdXRvQ2xpY2soKTtcclxufSk7XHJcblxyXG5hdmF0YXJUd28ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBudW1DbGljayA9IDI7XHJcbiAgYXV0b0NsaWNrKCk7XHJcbn0pO1xyXG5cclxuYXZhdGFyVGhyZWUub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICBudW1DbGljayA9IDM7XHJcbiAgYXV0b0NsaWNrKCk7XHJcbn0pO1xyXG5cclxuLy8g0J7RgtC/0YDQsNCy0LrQsCDRhNC+0YDQvNGLXHJcblxyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuY29uc3Qgc2VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQnKTtcclxuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcclxuY29uc3QgbW9kYWxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX190aXRsZScpO1xyXG5jb25zdCBtb2RhbEV4aXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J0bicpO1xyXG5jb25zdCBtb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fd2luZG93Jyk7XHJcblxyXG5cclxuc2VuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKGZvcm0pKSB7XHJcblxyXG4gICAgZm9ybURhdGEuYXBwZW5kKFwibmFtZVwiLCBmb3JtLmVsZW1lbnRzLm5hbWUudmFsdWUpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKFwicGhvbmVcIiwgZm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJjb21tZW50XCIsIGZvcm0uZWxlbWVudHMuY29tbWVudC52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJ0b1wiLCBcInZpa2EtdGVybGVja2F5YUBtYWlsLnJ1XCIpO1xyXG5cclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbC8nKTtcclxuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1SZXF1ZXN0ZWQtV2lkdGhcIiwgXCJYTUxIdHRwUmVxdWVzdFwiKTtcclxuICAgIHhoci5zZW5kKGZvcm1EYXRhKTtcclxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICBpZiAoeGhyLnJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBtb2RhbFdpbmRvdy5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgbW9kYWxUZXh0LnRleHRDb250ZW50ID0gXCLQodC+0L7QsdGJ0LXQvdC40LUg0L7RgtC/0YDQsNCy0LvQtdC90L5cIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIG1vZGFsV2luZG93LnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICBtb2RhbFRleHQudGV4dENvbnRlbnQgPSBcItCe0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4XCI7XHJcblxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5tb2RhbEV4aXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG8gXCI7XHJcblxyXG59KTtcclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBpZiAoZXZlbnQudGFyZ2V0ID09IG1vZGFsKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcblxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuICBsZXQgdmFsaWQgPSB0cnVlO1xyXG5cclxuICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5uYW1lKSkge1xyXG4gICAgdmFsaWQgPSBmYWxzZTtcclxuICB9XHJcbiAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMucGhvbmUpKSB7XHJcbiAgICB2YWxpZCA9IGZhbHNlO1xyXG4gIH1cclxuICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5jb21tZW50KSkge1xyXG4gICAgdmFsaWQgPSBmYWxzZTtcclxuICB9XHJcbiAgcmV0dXJuIHZhbGlkO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZpZWxkKGZpZWxkKSB7XHJcbiAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gZmllbGQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgcmV0dXJuIGZpZWxkLmNoZWNrVmFsaWRpdHkoKTtcclxuXHJcbn1cclxuXHJcblxyXG4vL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0Y/QvdC00LXQutGBLdC60LDRgNGCXHJcblxyXG55bWFwcy5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIG15TWFwID0gbmV3IHltYXBzLk1hcCgnbWFwJywge1xyXG4gICAgY2VudGVyOiBbNTkuOTQxODYxLCAzMC4zMjE5ODhdLFxyXG4gICAgem9vbTogMTNcclxuXHJcbiAgfSk7XHJcbiAgbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKVxyXG4gIE15SWNvbkNvbnRlbnRMYXlvdXQgPSB5bWFwcy50ZW1wbGF0ZUxheW91dEZhY3RvcnkuY3JlYXRlQ2xhc3MoXHJcbiAgICAnPGRpdiBzdHlsZT1cImNvbG9yOiAjRkZGRkZGOyBmb250LXdlaWdodDogYm9sZDtcIj4kW3Byb3BlcnRpZXMuaWNvbkNvbnRlbnRdPC9kaXY+J1xyXG4gICksXHJcbiAgICBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU5Ljk0MzQ3NywgMzAuMzI0MzYwXSwge1xyXG4gICAgICBoaW50Q29udGVudDogJ0NIT0NDTycsXHJcbiAgICAgIGJhbGxvb25Db250ZW50OiAn0LPRgNCw0YTQuNC6OiDQv9C9LdC/0YIsINCy0YvRhdC+0LTQvdGL0LU6INGB0LEs0LLRgSA8YnI+INGH0LDRgdGLINGA0LDQsdC+0YLRizog0YEgMTAtMDAg0LTQviAxOC0wMCcsXHJcbiAgICB9LCB7XHJcbiAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2VXaXRoQ29udGVudCcsXHJcbiAgICAgICAgaWNvbkltYWdlSHJlZjogJy4vaW1hZ2VzL21hcC9tYXJrZXIucG5nJyxcclxuICAgICAgICBpY29uSW1hZ2VTaXplOiBbNDYsIDU3XSxcclxuICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstMjQsIC0yNF0sXHJcbiAgICAgICAgaWNvbkNvbnRlbnRMYXlvdXQ6IE15SWNvbkNvbnRlbnRMYXlvdXRcclxuICAgICAgfSlcclxuICBteVBsYWNlbWFyazIgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFs1OS45MzIzMjMsIDMwLjMwMzI4OV0sIHtcclxuICAgIGhpbnRDb250ZW50OiAnQ0hPQ0NPJyxcclxuICAgIGJhbGxvb25Db250ZW50OiAn0LPRgNCw0YTQuNC6OiDQv9C9LdC/0YIsINCy0YvRhdC+0LTQvdGL0LU6INGB0LEs0LLRgSA8YnI+INGH0LDRgdGLINGA0LDQsdC+0YLRizog0YEgMTAtMDAg0LTQviAxOC0wMCcsXHJcbiAgfSwge1xyXG4gICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZVdpdGhDb250ZW50JyxcclxuICAgICAgaWNvbkltYWdlSHJlZjogJy4vaW1hZ2VzL21hcC9tYXJrZXIucG5nJyxcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzQ2LCA1N10sXHJcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0yNCwgLTI0XSxcclxuICAgICAgaWNvbkNvbnRlbnRMYXlvdXQ6IE15SWNvbkNvbnRlbnRMYXlvdXRcclxuICAgIH0pXHJcbiAgbXlNYXAuZ2VvT2JqZWN0c1xyXG4gICAgLmFkZChteVBsYWNlbWFyaylcclxuICAgIC5hZGQobXlQbGFjZW1hcmsyKVxyXG59KVxyXG5cclxuLy8g0YHQutGA0L7Qu9C7INC00LvRjyDRgdC10LrRhtC40LlcclxuXHJcbmNvbnN0IHNlY3Rpb25zID0gJCgnLnNlY3Rpb24nKTtcclxuY29uc3QgZGlzcGxheSA9ICQoJy5tYWluY29udGVudCcpO1xyXG5sZXQgaW5zY3JvbGwgPSBmYWxzZTtcclxuXHJcbmNvbnN0IG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbmNvbnN0IGlzTW9iaWxlID0gbWQubW9iaWxlKCk7XHJcblxyXG5jb25zdCBzd2l0Y2hBY3RpdmVDbGFzc1NpZGVNZW51ID0gbmF2TGlua0luZGV4ID0+IHtcclxuICAkKCcubmF2X19saW5rJylcclxuICAgIC5lcShuYXZMaW5rSW5kZXgpXHJcbiAgICAuYWRkQ2xhc3MoJ25hdl9fbGluay0tYWN0aXZlJylcclxuICAgIC5zaWJsaW5ncygpXHJcbiAgICAucmVtb3ZlQ2xhc3MoJ25hdl9fbGluay0tYWN0aXZlJyk7XHJcblxyXG59XHJcblxyXG5jb25zdCBwZXJmb3JtVHJhbnNpdGlvbiA9IHNlY3Rpb25FcSA9PiB7XHJcbiAgaWYgKGluc2Nyb2xsKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSAwO1xyXG4gIGNvbnN0IGVuZE9mSW5lcnRpb24gPSAzMDA7XHJcblxyXG4gIGluc2Nyb2xsID0gdHJ1ZTtcclxuXHJcbiAgY29uc3QgcG9zaXRpb24gPSBgJHtzZWN0aW9uRXEgKiAtMTAwfSVgO1xyXG5cclxuICBzZWN0aW9uc1xyXG4gICAgLmVxKHNlY3Rpb25FcSlcclxuICAgIC5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgIC5zaWJsaW5ncygpXHJcbiAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICBkaXNwbGF5LmNzcyh7XHJcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7cG9zaXRpb259KWBcclxuICB9KTtcclxuXHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBzd2l0Y2hBY3RpdmVDbGFzc1NpZGVNZW51KHNlY3Rpb25zKVxyXG4gICAgaW5zY3JvbGwgPSBmYWxzZTtcclxuXHJcbiAgfSwgdHJhbnNpdGlvbkR1cmF0aW9uICsgZW5kT2ZJbmVydGlvbik7XHJcblxyXG5cclxuXHJcbn07XHJcblxyXG5jb25zdCBzY3JvbGxUb1NlY3Rpb24gPSBkaXJlY3Rpb24gPT4ge1xyXG4gIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoJy5hY3RpdmUnKTtcclxuICBjb25zdCBuZXh0U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ubmV4dCgpO1xyXG4gIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT0gJ25leHQnICYmIG5leHRTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24obmV4dFNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgfVxyXG4gIGlmIChkaXJlY3Rpb24gPT0gJ3ByZXYnICYmIHByZXZTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24ocHJldlNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgfVxyXG59XHJcblxyXG4kKCcud3JhcHBlcicpLm9uKCd3aGVlbCcsIGUgPT4ge1xyXG4gIGNvbnN0IGRlbHRhWSA9IGUub3JpZ2luYWxFdmVudC5kZWx0YVk7XHJcblxyXG4gIGlmIChkZWx0YVkgPiAwKSB7XHJcbiAgICBzY3JvbGxUb1NlY3Rpb24oJ25leHQnKTtcclxuICB9XHJcblxyXG5cclxuICBpZiAoZGVsdGFZIDwgMCkge1xyXG4gICAgc2Nyb2xsVG9TZWN0aW9uKCdwcmV2Jyk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG4kKCcud3JhcHBlcicpLm9uKCd0b3VjaG1vdmUnLCBlID0+IHtcclxuICBlLnByZXZlbnREZWZvdWx0KCk7XHJcbn0pXHJcblxyXG4kKGRvY3VtZW50KS5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICBjYXNlIDQwOlxyXG4gICAgICBzY3JvbGxUb1NlY3Rpb24oJ25leHQnKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDM4OlxyXG4gICAgICBzY3JvbGxUb1NlY3Rpb24oJ3ByZXYnKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59KTtcclxuXHJcbiQoJ1tkYXRhLXNjcm9sbC10b10nKS5vbignY2xpY2snLCBlID0+IHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLXNjcm9sbC10bycpO1xyXG4gIHBlcmZvcm1UcmFuc2l0aW9uKHRhcmdldCk7XHJcbiAgY29uc29sZS5sb2codGFyZ2V0KTtcclxufSk7XHJcblxyXG5pZiAoaXNNb2JpbGUpIHtcclxuICAkKHdpbmRvdykuc3dpcGUoe1xyXG4gICAgc3dpcGU6IGZ1bmN0aW9uIChldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKSB7XHJcbiAgICAgIGNvbnN0IG5leHRPclByZXYgPSBkaXJlY3Rpb24gPT0gJ3VwJyA/ICduZXh0JyA6ICdwcmV2JztcclxuXHJcbiAgICAgIHNjcm9sbFRvU2VjdGlvbihuZXh0T3JQcmV2KTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuIl19
