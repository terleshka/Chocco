"use strict";var menuOpen=document.getElementById("menuOpen"),menuModal=document.getElementById("menuModal"),menuClose=document.getElementById("menuClose");menuOpen.onclick=function(){menuModal.style.display="flex",document.body.style.overflow="hidden"},menuClose.onclick=function(){menuModal.style.display="none",document.body.style.overflow="auto"};for(var acc=document.getElementsByClassName("team__name"),i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){this.classList.toggle("team__name--active")});var currentActiveItem,accordion=document.querySelector(".accordion");accordion.classList.add("accordion"),accordion.addEventListener("click",function(e){if(e.target.classList.contains("accordion__title")||e.target.classList.contains("accordion__link")){if(currentActiveItem&&(currentActiveItem.classList.remove("accordion__item--active"),currentActiveItem==e.target.parentNode.parentNode||currentActiveItem==e.target.parentNode))return void(currentActiveItem=0);(currentActiveItem=e.target.classList.contains("accordion__title")?e.target.parentNode.parentNode:e.target.parentNode).classList.add("accordion__item--active")}});var left=$("#left"),right=$("#right"),items=$("#items"),slider=$(".slider"),slideInterval=setInterval(rightClickTimer,8e3),firstStep=0,step=slider.width(),lastStep=items.width(),currentStep=0;function rightClickTimer(){if(currentStep<lastStep-step)return currentStep+=step,void items.css("right",currentStep+"px");currentStep==lastStep-step&&(currentStep=0,items.css("right",currentStep+"px"))}items.css("right",currentStep),right.on("click",function(e){e.preventDefault(),rightClickTimer()}),left.on("click",function(e){if(e.preventDefault(),firstStep<currentStep)return currentStep-=step,void items.css("right",currentStep+"px");currentStep==firstStep&&(currentStep=lastStep-step,items.css("right",currentStep+"px"))});var feedbackSliderOne=$(".slider_one"),feedbackSliderTwo=$(".slider_two"),feedbackSliderThree=$(".slider_three"),avatarOne=$(".avatar_one"),avatarTwo=$(".avatar_two"),avatarThree=$(".avatar_three"),numClick=1,slideInterval_1=setInterval(autoClick,6e3);function deleteClassActive(){$(".avatar__img").removeClass("avatar__img_active"),$(".feedback__slider").removeClass("feedback__slider--active")}function autoClick(){switch(deleteClassActive(),numClick){case 1:feedbackSliderOne.addClass("feedback__slider--active"),avatarOne.addClass("avatar__img_active"),numClick++;break;case 2:feedbackSliderTwo.addClass("feedback__slider--active"),avatarTwo.addClass("avatar__img_active"),numClick++;break;case 3:feedbackSliderThree.addClass("feedback__slider--active"),avatarThree.addClass("avatar__img_active"),numClick=1}}autoClick(),avatarOne.on("click",function(e){numClick=1,autoClick()}),avatarTwo.on("click",function(e){numClick=2,autoClick()}),avatarThree.on("click",function(e){numClick=3,autoClick()});var form=document.querySelector(".form"),send=document.querySelector(".form__submit"),modal=document.querySelector(".modal"),modalText=document.querySelector(".modal__title"),modalExit=document.querySelector(".modal__btn"),modalWindow=document.querySelector(".modal__window");function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.comment)||(t=!1),t}function validateField(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}send.addEventListener("click",function(e){e.preventDefault();var t=new FormData;if(validateForm(form)){t.append("name",form.elements.name.value),t.append("phone",form.elements.phone.value),t.append("comment",form.elements.comment.value),t.append("to","vika-terleckaya@mail.ru");var a=new XMLHttpRequest;a.responseType="json",a.open("POST","https://webdev-api.loftschool.com/sendmail/"),a.setRequestHeader("X-Requested-Width","XMLHttpRequest"),a.send(t),a.addEventListener("load",function(){a.response.status?(console.log(a.response),modal.style.display="block",modalWindow.style.opacity="1",document.body.style.overflow="hidden",modalText.textContent="Сообщение отправлено"):(modal.style.display="block",modalWindow.style.opacity="1",document.body.style.overflow="hidden",modalText.textContent="Ошибка отправки")})}}),modalExit.addEventListener("click",function(e){e.preventDefault(),modal.style.display="none",document.body.style.overflow="auto "}),window.onclick=function(e){e.target==modal&&(modal.style.display="none",document.body.style.overflow="auto")},ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.941861,30.321988],zoom:13});e.behaviors.disable("scrollZoom"),MyIconContentLayout=ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),myPlacemark=new ymaps.Placemark([59.943477,30.32436],{hintContent:"CHOCCO",balloonContent:"график: пн-пт, выходные: сб,вс <br> часы работы: с 10-00 до 18-00"},{iconLayout:"default#imageWithContent",iconImageHref:"./images/map/marker.png",iconImageSize:[46,57],iconImageOffset:[-24,-24],iconContentLayout:MyIconContentLayout}),myPlacemark2=new ymaps.Placemark([59.932323,30.303289],{hintContent:"CHOCCO",balloonContent:"график: пн-пт, выходные: сб,вс <br> часы работы: с 10-00 до 18-00"},{iconLayout:"default#imageWithContent",iconImageHref:"./images/map/marker.png",iconImageSize:[46,57],iconImageOffset:[-24,-24],iconContentLayout:MyIconContentLayout}),e.geoObjects.add(myPlacemark).add(myPlacemark2)});var sections=$(".section"),display=$(".maincontent"),inscroll=!1,md=new MobileDetect(window.navigator.userAgent),isMobile=md.mobile(),switchActiveClassSideMenu=function(e){$(".nav__link").eq(e).addClass("nav__link--active").siblings().removeClass("nav__link--active")},performTransition=function(e){if(!inscroll){inscroll=!0;var t="".concat(-100*e,"%");sections.eq(e).addClass("active").siblings().removeClass("active"),display.css({transform:"translateY(".concat(t,")")}),setTimeout(function(){switchActiveClassSideMenu(sections),inscroll=!1},300)}},scrollToSection=function(e){var t=sections.filter(".active"),a=t.next(),n=t.prev();"next"==e&&a.length&&performTransition(a.index()),"prev"==e&&n.length&&performTransition(n.index())};$(".wrapper").on("wheel",function(e){var t=e.originalEvent.deltaY;0<t&&scrollToSection("next"),t<0&&scrollToSection("prev")}),$(".wrapper").on("touchmove",function(e){e.preventDefoult()}),$(document).on("keydown",function(e){switch(e.keyCode){case 40:scrollToSection("next");break;case 38:scrollToSection("prev")}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to");performTransition(t),console.log(t)}),isMobile&&$(window).swipe({swipe:function(e,t,a,n,o,r){scrollToSection("up"==t?"next":"prev")}});var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var player,firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var playerWidth="660",playerHeight="370";function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:playerHeight,width:playerWidth,videoId:"OHoRhdPNqpQ",playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}var screenWidth=screen.width,panel=$(".panel"),playerImageWidth=$(".player__image");function formatTime(e){var t=Math.round(e),a=Math.floor(t/60),n=t-60*a;return a+":"+(n<10?"0".concat(n):n)}function onPlayerReady(e){var t,a=player.getDuration();clearInterval(t),t=setInterval(function(){var e=player.getCurrentTime(),t=e/a*100;$(".player__fader").css({left:"".concat(t,"%")}),$(".player__time").text(formatTime(e))},1e3)}function onPlayerStateChange(e){var t=$(".play");switch(e.data){case 1:$(".player__wrapper").addClass("active"),t.addClass("paused");break;case 2:t.removeClass("paused")}}screenWidth<=768&&480<screenWidth?(playerWidth="600",playerHeight="330",playerImageWidth.css("width","600"),panel.css("width","600")):screenWidth<=480&&(playerWidth="400",playerHeight="220",playerImageWidth.css("width","400"),panel.css("width","400")),$(".play").on("click",function(e){var t=$(e.currentTarget);t.hasClass("paused")?(player.pauseVideo(),t.removeClass("paused")):(player.playVideo(),t.addClass("paused"))}),$(".player__line").on("click",function(e){console.log(e),e.preventDefault();var t=$(e.currentTarget),a=(e.pageX-t.offset().left)/t.width()*100,n=player.getDuration()/100*a;$(".player__fader").css({left:"".concat(a,"%")}),player.seekTo(n)}),$(".player__image").on("click",function(e){player.playVideo()}),$(".player__volume").on("click",function(e){var t=$(e.currentTarget);t.hasClass("volume__active")?(player.unMute(),t.removeClass("volume__active")):(player.mute(),t.addClass("volume__active"))});